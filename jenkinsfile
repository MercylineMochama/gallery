pipeline {
    agent any 
    
    stages {
        stage('clone repository') {
            steps {
                echo 'Cloning the Repository'
                git 'https://github.com/MercylineMochama/gallery.git'
            }
        }

	stage('Deploy to Heroku') {
  steps {
    withCredentials([usernameColonPassword(credentialsId: 'heroku', variable: 'HEROKU_CREDENTIALS' )]){
      sh 'git push https://${HEROKU_CREDENTIALS}@git.heroku.com/mercip-app.git master'
    }
  }
   post {
        always{
        slackSend color: "good", message:  "Deployed ${BUILD_ID}"
        }
}
}
   stage ('Tests') {
       steps {
         sh 'npm test'  
       }
       }